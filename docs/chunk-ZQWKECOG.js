import{a as xe}from"./chunk-S65JF6HM.js";import{a as ee,b as te,c as re,d as ie,e as oe,f as ne,g as se,h as ae,i as le,j as me,k as de,l as ce,m as pe,n as ge}from"./chunk-WA2EDG6W.js";import{a as ue}from"./chunk-4PFSTVV6.js";import{Aa as A,Ba as Z,Ca as fe,D as a,E as p,I as m,J as l,M as o,N as r,O as u,P as U,Q as b,R as d,V as $,W as n,X as G,Y as c,Z as H,ca as y,d as V,da as _,ea as z,g as L,i as T,k as q,la as S,ma as C,n as M,na as J,o as v,oa as K,pa as Q,q as R,r as j,ra as W,s as g,t as I,w as B,wa as X,x as P,xa as k,ya as Y}from"./chunk-X3HYHAT6.js";var E=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=g({type:t,selectors:[["app-layout-ingreso"]],decls:1,vars:0,template:function(e,s){e&1&&u(0,"router-outlet")},dependencies:[X]})};var F=V(ue());var f=class t{constructor(i){this.http=i}baseUrl=Z.baseUrl;lisIngreso(){return this.http.get(`${this.baseUrl}/api/ingresos`)}addIngreso(i){return this.http.post(`${this.baseUrl}/api/ingresos/create`,i)}updateIngreso(i){if(!i.id)throw Error("ingreso requerido");return this.http.post(`${this.baseUrl}/api/ingresos`,i)}deleteIngresoById(i){return this.http.delete(`${this.baseUrl}/api/ingresos/${i}`).pipe(q(e=>L(!1)),T(e=>!0))}static \u0275fac=function(e){return new(e||t)(R(W))};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})};function Se(t,i){t&1&&(o(0,"small",23),n(1," La fecha es requerida. "),r())}function Ce(t,i){if(t&1&&(o(0,"div"),m(1,Se,2,0,"small",22),r()),t&2){let e=d();a(),l("ngIf",e.ingresoForm.controls.fechaIngreso.errors==null?null:e.ingresoForm.controls.fechaIngreso.errors.required)}}function ke(t,i){t&1&&(o(0,"p",25)(1,"span",26),n(2,"Oops!"),r(),n(3," El precio es requerido! "),r())}function Ee(t,i){t&1&&(o(0,"p",25)(1,"span",26),n(2,"Oops!"),r(),n(3," Debes ingresar solo n\xFAmeros! "),r())}function Fe(t,i){if(t&1&&(o(0,"div"),m(1,ke,4,0,"p",24)(2,Ee,4,0,"p",24),r()),t&2){let e=d();a(),l("ngIf",e.ingresoForm.controls.producidoDiario.errors==null?null:e.ingresoForm.controls.producidoDiario.errors.required),a(),l("ngIf",e.ingresoForm.controls.producidoDiario.errors==null?null:e.ingresoForm.controls.producidoDiario.errors.pattern)}}function we(t,i){t&1&&(o(0,"p",25)(1,"span",26),n(2,"Oops!"),r(),n(3,"La descripci\xF3n del ingreso es requerida! "),r())}function De(t,i){if(t&1&&(o(0,"div"),m(1,we,4,0,"p",24),r()),t&2){let e=d();a(),l("ngIf",e.ingresoForm.controls.descripcion.errors==null?null:e.ingresoForm.controls.descripcion.errors.required)}}function Ne(t,i){if(t&1&&(o(0,"option",27),n(1),r()),t&2){let e=i.$implicit;l("ngValue",e.id),a(),G(e.placa)}}function Ae(t,i){t&1&&(o(0,"p",25)(1,"span",26),n(2,"Oops!"),r(),n(3," El vehiculo es requerido! "),r())}function Oe(t,i){if(t&1&&(o(0,"div"),m(1,Ae,4,0,"p",24),r()),t&2){let e=d();a(),l("ngIf",e.ingresoForm.controls.id.errors==null?null:e.ingresoForm.controls.id.errors.required)}}var w=class t{constructor(i,e,s){this.ingresoService=i;this.vehiculoService=e;this.router=s}fb=j(pe);vl=te;ingresos=[];vehiculos=[];ngOnInit(){this.dataVehiculos()}ingresoForm=this.fb.group({id:[0],fechaIngreso:["",[this.vl.required]],producidoDiario:[0,[this.vl.required,this.vl.pattern(/^[0-9]*$/)]],descripcion:["",[this.vl.required]],vehiculo:this.fb.group({id:[0,[this.vl.required]]})});dataVehiculos(){this.vehiculoService.getPVehiculo().subscribe(i=>this.vehiculos=i)}get currentIngreso(){return this.ingresoForm.value}onSubmit(){if(this.ingresoForm.invalid){F.default.fire({icon:"error",title:"Oops...",text:"Debes diligenciar todos los campos!"});return}this.currentIngreso.id&&this.ingresoService.updateIngreso(this.currentIngreso).subscribe({next:i=>{console.log(i),this.router.navigateByUrl("/dashboard/ingreso/list-ingresos"),F.default.fire({title:"Actualizado ingreso!",text:"Ingreso actualizado con exito!",icon:"success"})}}),this.ingresoService.addIngreso(this.currentIngreso).subscribe({next:i=>{console.log(i),this.router.navigateByUrl("/dashboard/ingreso/list-ingresos"),F.default.fire({title:"Nuevo ingreso!",text:"Creado con exito!",icon:"success"})}})}onReset(){this.ingresoForm.reset()}static \u0275fac=function(e){return new(e||t)(p(f),p(xe),p(k))};static \u0275cmp=g({type:t,selectors:[["ingreso-add-ingreso"]],decls:37,vars:10,consts:[[1,"bg-white","p-6","shadow-4","dark:bg-gray-900","mx-auto","block","max-w-lm","rounded-lg"],[1,"py-8","px-4","mx-auto","max-w-2xl","lg:py-16"],[1,"mb-4","text-xl","font-bold","text-gray-900","dark:text-white"],[3,"ngSubmit","formGroup"],[1,"grid","gap-4","sm:grid-cols-2","sm:gap-6"],[1,"w-full"],["for","fechaIngreso",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-gray-300"],["formControlName","fechaIngreso","name","fechaIngreso","type","date","id","fechaIngreso",1,"shadow-sm","bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-primary-500","focus:border-primary-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-primary-500","dark:focus:border-primary-500","dark:shadow-sm-light"],[4,"ngIf"],["for","producidoDiario",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","producidoDiario","type","number","name","producidoDiario","id","producidoDiario","placeholder","0",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-primary-500","dark:focus:border-primary-500"],[1,"sm:col-span-2"],["for","descripcion",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","descripcion","name","descripcion","id","descripcion","rows","5","placeholder","Descripci\xF3n del producto",1,"block","p-2.5","w-full","text-sm","text-gray-900","bg-gray-50","rounded-lg","border","border-gray-300","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-primary-500","dark:focus:border-primary-500"],["formGroupName","vehiculo",1,"sm:col-span-2"],["for","id",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","id","name","id","id","id",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-primary-500","focus:border-primary-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-primary-500","dark:focus:border-primary-500"],[3,"selected","ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between"],["type","submit",1,"inline-flex","items-center","px-5","py-2.5","mt-4","sm:mt-6","text-sm","font-medium","text-center","text-white","bg-primary-700","rounded-lg","focus:ring-4","focus:ring-primary-200","dark:focus:ring-primary-900","hover:bg-primary-800","m-2"],["type","reset",1,"inline-flex","items-center","px-5","py-2.5","mt-4","sm:mt-6","text-sm","font-medium","text-center","text-white","bg-primary-700","rounded-lg","focus:ring-4","focus:ring-primary-200","dark:focus:ring-primary-900","hover:bg-primary-800",3,"click"],["Class","form -text text-danger",4,"ngIf"],["Class","form -text text-danger"],["class","mt-2 text-sm text-red-600 dark:text-red-500",4,"ngIf"],[1,"mt-2","text-sm","text-red-600","dark:text-red-500"],[1,"font-medium"],[3,"ngValue"]],template:function(e,s){e&1&&(o(0,"section",0)(1,"div",1)(2,"h2",2),n(3,"Agregar Nuevo Ingreso"),r(),o(4,"form",3),b("ngSubmit",function(){return s.onSubmit()}),o(5,"div",4)(6,"div",5)(7,"label",6),n(8,"Fecha de Ingreso"),r(),u(9,"input",7),m(10,Ce,2,1,"div",8),r(),o(11,"div",5)(12,"label",9),n(13,"Producido"),r(),u(14,"input",10),m(15,Fe,3,2,"div",8),r(),o(16,"div",11)(17,"label",12),n(18,"Descripci\xF3n"),r(),u(19,"textarea",13),m(20,De,2,1,"div",8),r(),o(21,"div",14)(22,"label",15),n(23,"Vehiculo"),r(),o(24,"select",16)(25,"option",17),n(26,"Seleccione el Vehiculo"),r(),m(27,Ne,2,2,"option",18),r(),m(28,Oe,2,1,"div",8),r()(),o(29,"div",19)(30,"button",20),n(31," Agregar "),r(),o(32,"button",21),b("click",function(){return s.onReset()}),n(33," Limpiar "),r()()()()(),o(34,"pre"),n(35),y(36,"json"),r()),e&2&&(a(4),l("formGroup",s.ingresoForm),a(6),l("ngIf",s.ingresoForm.controls.fechaIngreso.invalid&&(s.ingresoForm.controls.fechaIngreso.dirty||s.ingresoForm.controls.fechaIngreso.touched)),a(5),l("ngIf",s.ingresoForm.controls.producidoDiario.invalid&&(s.ingresoForm.controls.producidoDiario.dirty||s.ingresoForm.controls.producidoDiario.touched)),a(5),l("ngIf",s.ingresoForm.controls.descripcion.invalid&&(s.ingresoForm.controls.descripcion.dirty||s.ingresoForm.controls.descripcion.touched)),a(5),l("ngValue",0),a(2),l("ngForOf",s.vehiculos),a(),l("ngIf",s.ingresoForm.controls.id.invalid&&(s.ingresoForm.controls.id.dirty||s.ingresoForm.controls.id.touched)),a(7),c("  ",_(36,8,s.currentIngreso),`
`))},dependencies:[S,C,oe,de,ce,ee,ne,me,re,ie,se,le,ae,J]})};var O=V(ue());function Ve(t,i){t&1&&(o(0,"div",2),n(1,` NO hay Ingresos que mostrar
`),r())}function Le(t,i){if(t&1){let e=U();o(0,"tbody")(1,"tr",15)(2,"td",16),n(3),r(),o(4,"td",16),n(5),r(),o(6,"td",16),n(7),y(8,"number"),r(),o(9,"td",16),n(10),r(),o(11,"td",16),n(12),r(),o(13,"td",16),n(14),r(),o(15,"th")(16,"button",17),n(17,"Update"),r()(),o(18,"th")(19,"button",18),b("click",function(){let x=B(e).$implicit,ye=d(2);return P(ye.onDeleteVehiculo(x.id))}),n(20,"Delete"),r()()()()}if(t&2){let e=i.$implicit,s=i.index;a(3),c(" ",s+1,""),a(2),c(" ",e.fechaIngreso,""),a(2),c(" ",_(8,8,e.producidoDiario),""),a(3),c(" ",e.descripcion,""),a(2),c(" ",e.vehiculo.placa,""),a(2),H(" ",e.vehiculo.propietario.primerNombre,"","","",e.vehiculo.propietario.primerApellido,"")}}function Te(t,i){if(t&1&&(o(0,"div",3)(1,"span",4),n(2,"Listado de Ingresos"),r(),o(3,"div",5)(4,"div",6)(5,"button",7),n(6,"Nuevo Ingreso"),r(),o(7,"div",8)(8,"table",9)(9,"thead",10)(10,"tr")(11,"th",11),n(12,"#"),r(),o(13,"th",12),n(14,"Fecha Ingreso "),r(),o(15,"th",11),n(16,"Producido"),r(),o(17,"th",11),n(18,"Descripci\xF3n"),r(),o(19,"th",11),n(20,"Placa Carro"),r(),o(21,"th",11),n(22,"Propietario"),r(),o(23,"th",13),n(24,"Acciones"),r()()(),m(25,Le,21,10,"tbody",14),r()()()()()),t&2){let e=d();a(25),l("ngForOf",e.ingresos)}}var D=class t{constructor(i,e){this.ingresoService=i;this.router=e}ingresos=[];ngOnInit(){this.ingresoService.lisIngreso().subscribe(i=>this.ingresos=i),console.log(this.ingresos)}onDeleteVehiculo(i){O.default.fire({title:"Seguro que quiere eliminar?",text:"Cuidado el vehiculo sera eliminado del sistema!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si"}).then(e=>{e.isConfirmed&&(this.ingresoService.deleteIngresoById(i).subscribe(()=>{this.router.navigate(["/dashboard/ingreso/list-ingresos"],{skipLocationChange:!0}).then(()=>{this.router.navigate(["/dashboard/ingreso/list-ingresos"],{state:{}})})}),O.default.fire({title:"Eliminado!",text:"Ingreso eliminado con exito.",icon:"success"}))})}static \u0275fac=function(e){return new(e||t)(p(f),p(k))};static \u0275cmp=g({type:t,selectors:[["ingreso-list-ingreso"]],decls:3,vars:2,consts:[["table",""],["class","alert alert-warning text-center",4,"ngIf","ngIfElse"],[1,"alert","alert-warning","text-center"],[1,"flex","flex-col"],[1,"text-4xl","text-cyan-800","text-center","font-medium","leading-tight"],[1,"overflow-x-auto","sm:-mx-6","lg:-mx-8"],[1,"inline-block","min-w-full","py-2","sm:px-6","lg:px-8"],["routerLink","/dashboard/ingreso/add-ingresos",1,"btn","btn-lm","btn-outline-primary","m-2"],[1,"overflow-hidden"],["data-twe-spy","scroll","data-twe-target","#scrollspy-collapsible","data-twe-offset","0",1,"min-w-full","text-center","text-sm","font-light","text-surface","dark:text-white"],[1,"border-b","border-neutral-200","bg-[#68829b]","font-medium","text-white","dark:border-white/10"],["scope","col",1,"px-6","py-4","text-left"],["scope","col",1,"px-6","py-4"],["colspan","2",2,"text-align","center"],[4,"ngFor","ngForOf"],[1,"border-b","border-neutral-200","dark:border-white/10","text-dark"],[1,"whitespace-nowrap","px-6","py-4","text-left"],[1,"btn","btn-sm","btn-outline-success"],["type","submit",1,"btn","btn-sm","btn-outline-danger",3,"click"]],template:function(e,s){if(e&1&&m(0,Ve,2,0,"div",1)(1,Te,26,1,"ng-template",null,0,z),e&2){let x=$(2);l("ngIf",s.ingresos.length===0)("ngIfElse",x)}},dependencies:[S,C,Y,K]})};var qe=[{path:"",component:E},{path:"list-ingresos",component:D},{path:"add-ingresos",component:w},{path:"**",redirectTo:"home"}],N=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=I({type:t});static \u0275inj=v({imports:[A.forChild(qe),A]})};var Ie=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=I({type:t});static \u0275inj=v({imports:[Q,N,ge,fe]})};export{Ie as IngresoModule};
