import{a as xe}from"./chunk-HIHKXWVL.js";import{a as te,b as re,c as ie,d as oe,e as ne,f as ae,g as se,h as le,i as de,j as me,k as pe,l as ce,m as ge,n as ue}from"./chunk-I7A4Q7BR.js";import{a as fe}from"./chunk-P2QTSFM2.js";import{Ba as D,Ca as ee,D as s,Da as ve,E as g,I as d,J as l,M as o,N as e,O as c,P as $,Q as b,R as m,V as P,W as i,X as U,Y as p,Z as H,ca as f,d as N,da as y,ea as z,fa as J,g as L,i as O,k as T,ma as S,n as V,na as k,o as I,oa as K,pa as Q,q as M,qa as W,r as R,s as u,sa as X,t as _,w as j,x as B,xa as Y,ya as E,za as Z}from"./chunk-Z2VWX25V.js";var F=class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=u({type:t,selectors:[["app-layout-ingreso"]],decls:1,vars:0,template:function(r,a){r&1&&c(0,"router-outlet")},dependencies:[Y]})};var C=N(fe());var v=class t{constructor(n){this.http=n}baseUrl=ee.baseUrl;lisIngreso(){return this.http.get(`${this.baseUrl}/api/ingresos`)}addIngreso(n){return this.http.post(`${this.baseUrl}/api/ingresos/create`,n)}updateIngreso(n){if(!n.id)throw Error("ingreso requerido");return this.http.post(`${this.baseUrl}/api/ingresos`,n)}deleteIngresoById(n){return this.http.delete(`${this.baseUrl}/api/ingresos/${n}`).pipe(T(r=>L(!1)),O(r=>!0))}static \u0275fac=function(r){return new(r||t)(M(X))};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})};function ke(t,n){t&1&&(o(0,"p",29)(1,"span",30),i(2,"Oops!"),e(),i(3," La fecha es requerida! "),e())}function Ee(t,n){if(t&1&&(o(0,"div"),d(1,ke,4,0,"p",28),e()),t&2){let r=m();s(),l("ngIf",r.ingresoForm.controls.fechaIngreso.errors==null?null:r.ingresoForm.controls.fechaIngreso.errors.required)}}function Fe(t,n){t&1&&(o(0,"p",29)(1,"span",30),i(2,"Oops!"),e(),i(3," El Ingreso Diario es requerido! "),e())}function Ce(t,n){t&1&&(o(0,"p",29)(1,"span",30),i(2,"Oops!"),e(),i(3," Debes ingresar solo n\xFAmeros! "),e())}function we(t,n){if(t&1&&(o(0,"div"),d(1,Fe,4,0,"p",28)(2,Ce,4,0,"p",28),e()),t&2){let r=m();s(),l("ngIf",r.ingresoForm.controls.producidoDiario.errors==null?null:r.ingresoForm.controls.producidoDiario.errors.required),s(),l("ngIf",r.ingresoForm.controls.producidoDiario.errors==null?null:r.ingresoForm.controls.producidoDiario.errors.pattern)}}function Ae(t,n){t&1&&(o(0,"p",29)(1,"span",30),i(2,"Oops!"),e(),i(3," El Valor de la liquidaci\xF3n es requerido! "),e())}function qe(t,n){t&1&&(o(0,"p",29)(1,"span",30),i(2,"Oops!"),e(),i(3," Debes ingresar solo n\xFAmeros! "),e())}function De(t,n){if(t&1&&(o(0,"div"),d(1,Ae,4,0,"p",28)(2,qe,4,0,"p",28),e()),t&2){let r=m();s(),l("ngIf",r.ingresoForm.controls.vrLiquidacion.errors==null?null:r.ingresoForm.controls.vrLiquidacion.errors.required),s(),l("ngIf",r.ingresoForm.controls.vrLiquidacion.errors==null?null:r.ingresoForm.controls.vrLiquidacion.errors.pattern)}}function Ge(t,n){t&1&&(o(0,"p",29)(1,"span",30),i(2,"Oops!"),e(),i(3," El valor de la gasolina es requerido! "),e())}function Ne(t,n){t&1&&(o(0,"p",29)(1,"span",30),i(2,"Oops!"),e(),i(3," Debes ingresar solo n\xFAmeros! "),e())}function Le(t,n){if(t&1&&(o(0,"div"),d(1,Ge,4,0,"p",28)(2,Ne,4,0,"p",28),e()),t&2){let r=m();s(),l("ngIf",r.ingresoForm.controls.vrGasolina.errors==null?null:r.ingresoForm.controls.vrGasolina.errors.required),s(),l("ngIf",r.ingresoForm.controls.vrGasolina.errors==null?null:r.ingresoForm.controls.vrGasolina.errors.pattern)}}function Oe(t,n){t&1&&(o(0,"p",29)(1,"span",30),i(2,"Oops!"),e(),i(3," El precio es requerido! "),e())}function Te(t,n){t&1&&(o(0,"p",29)(1,"span",30),i(2,"Oops!"),e(),i(3," Debes ingresar solo n\xFAmeros! "),e())}function Ve(t,n){if(t&1&&(o(0,"div"),d(1,Oe,4,0,"p",28)(2,Te,4,0,"p",28),e()),t&2){let r=m();s(),l("ngIf",r.ingresoForm.controls.vrGastosAdicionales.errors==null?null:r.ingresoForm.controls.vrGastosAdicionales.errors.required),s(),l("ngIf",r.ingresoForm.controls.vrGastosAdicionales.errors==null?null:r.ingresoForm.controls.vrGastosAdicionales.errors.pattern)}}function Me(t,n){t&1&&(o(0,"p",29)(1,"span",30),i(2,"Oops!"),e(),i(3,"La descripci\xF3n del ingreso es requerida! "),e())}function Re(t,n){if(t&1&&(o(0,"div"),d(1,Me,4,0,"p",28),e()),t&2){let r=m();s(),l("ngIf",r.ingresoForm.controls.descripcion.errors==null?null:r.ingresoForm.controls.descripcion.errors.required)}}function je(t,n){if(t&1&&(o(0,"option",31),i(1),e()),t&2){let r=n.$implicit;l("ngValue",r.id),s(),U(r.placa)}}function Be(t,n){t&1&&(o(0,"p",29)(1,"span",30),i(2,"Oops!"),e(),i(3," El vehiculo es requerido! "),e())}function $e(t,n){if(t&1&&(o(0,"div"),d(1,Be,4,0,"p",28),e()),t&2){let r=m();s(),l("ngIf",r.ingresoForm.controls.id.errors==null?null:r.ingresoForm.controls.id.errors.required)}}var w=class t{constructor(n,r,a){this.ingresoService=n;this.vehiculoService=r;this.router=a}fb=R(ge);vl=re;ingresos=[];vehiculos=[];ngOnInit(){this.dataVehiculos()}ingresoForm=this.fb.group({id:[0],fechaIngreso:["",[this.vl.required]],producidoDiario:[0,[this.vl.required,this.vl.pattern(/^[0-9]*$/)]],vrLiquidacion:[0,[this.vl.required,this.vl.pattern(/^[0-9]*$/)]],vrGasolina:[0,[this.vl.required,this.vl.pattern(/^[0-9]*$/)]],vrGastosAdicionales:[0,[this.vl.required,this.vl.pattern(/^[0-9]*$/)]],descripcion:["",[this.vl.required]],vehiculo:this.fb.group({id:[0,[this.vl.required]]})});dataVehiculos(){this.vehiculoService.getPVehiculo().subscribe(n=>this.vehiculos=n)}get currentIngreso(){return this.ingresoForm.value}onSubmit(){if(this.ingresoForm.invalid){C.default.fire({icon:"error",title:"Oops...",text:"Debes diligenciar todos los campos!"});return}this.currentIngreso.id&&this.ingresoService.updateIngreso(this.currentIngreso).subscribe({next:n=>{console.log(n),this.router.navigateByUrl("/dashboard/ingreso/list-ingresos"),C.default.fire({title:"Actualizado ingreso!",text:"Ingreso actualizado con exito!",icon:"success"})}}),this.ingresoService.addIngreso(this.currentIngreso).subscribe({next:n=>{console.log(n),this.router.navigateByUrl("/dashboard/ingreso/list-ingresos"),C.default.fire({title:"Nuevo ingreso!",text:"Creado con exito!",icon:"success"})}})}onReset(){this.ingresoForm.reset()}static \u0275fac=function(r){return new(r||t)(g(v),g(xe),g(E))};static \u0275cmp=u({type:t,selectors:[["ingreso-add-ingreso"]],decls:51,vars:11,consts:[[1,"bg-white","p-6","shadow-4","dark:bg-gray-900","mx-auto","block","max-w-lm","rounded-lg"],[1,"py-8","px-4","mx-auto","max-w-2xl","lg:py-16"],[1,"mb-4","text-xl","font-bold","text-gray-900","dark:text-white"],[3,"ngSubmit","formGroup"],[1,"grid","gap-4","sm:grid-cols-2","sm:gap-6"],[1,"sm:col-span-2"],["for","fechaIngreso",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-gray-300"],["formControlName","fechaIngreso","name","fechaIngreso","type","date","id","fechaIngreso",1,"shadow-sm","bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-primary-500","focus:border-primary-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-primary-500","dark:focus:border-primary-500","dark:shadow-sm-light"],[4,"ngIf"],[1,"w-full"],["for","producidoDiario",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","producidoDiario","type","number","name","producidoDiario","id","producidoDiario","placeholder","0",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-primary-500","dark:focus:border-primary-500"],["for","vrLiquidacion",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","vrLiquidacion","type","number","name","vrLiquidacion","id","vrLiquidacion","placeholder","0",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-primary-500","dark:focus:border-primary-500"],["for","vrGasolina",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","vrGasolina","type","number","name","vrGasolina","id","vrGasolina","placeholder","0",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-primary-500","dark:focus:border-primary-500"],["for","vrGastosAdicionales",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","vrGastosAdicionales","type","number","name","vrGastosAdicionales","id","vrGastosAdicionales","placeholder","0",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-primary-500","dark:focus:border-primary-500"],["for","descripcion",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","descripcion","name","descripcion","id","descripcion","rows","5","placeholder","Descripci\xF3n del ingreso",1,"block","p-2.5","w-full","text-sm","text-gray-900","bg-gray-50","rounded-lg","border","border-gray-300","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-primary-500","dark:focus:border-primary-500"],["formGroupName","vehiculo",1,"sm:col-span-2"],["for","id",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","id","name","id","id","id",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-primary-500","focus:border-primary-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-primary-500","dark:focus:border-primary-500"],[3,"selected","ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between"],["type","submit",1,"inline-flex","items-center","px-5","py-2.5","mt-4","sm:mt-6","text-sm","font-medium","text-center","text-white","bg-primary-700","rounded-lg","focus:ring-4","focus:ring-primary-200","dark:focus:ring-primary-900","hover:bg-primary-800","m-2"],["type","reset",1,"inline-flex","items-center","px-5","py-2.5","mt-4","sm:mt-6","text-sm","font-medium","text-center","text-white","bg-primary-700","rounded-lg","focus:ring-4","focus:ring-primary-200","dark:focus:ring-primary-900","hover:bg-primary-800",3,"click"],["class","mt-2 text-sm text-red-600 dark:text-red-500",4,"ngIf"],[1,"mt-2","text-sm","text-red-600","dark:text-red-500"],[1,"font-medium"],[3,"ngValue"]],template:function(r,a){r&1&&(o(0,"section",0)(1,"div",1)(2,"h2",2),i(3,"Agregar Nuevo Ingreso"),e(),o(4,"form",3),b("ngSubmit",function(){return a.onSubmit()}),o(5,"div",4)(6,"div",5)(7,"label",6),i(8,"Fecha de Ingreso"),e(),c(9,"input",7),d(10,Ee,2,1,"div",8),e(),o(11,"div",9)(12,"label",10),i(13,"Producido"),e(),c(14,"input",11),d(15,we,3,2,"div",8),e(),o(16,"div",9)(17,"label",12),i(18,"Valor liquidaci\xF3n"),e(),c(19,"input",13),d(20,De,3,2,"div",8),e(),o(21,"div",9)(22,"label",14),i(23,"Valor gasolina"),e(),c(24,"input",15),d(25,Le,3,2,"div",8),e(),o(26,"div",9)(27,"label",16),i(28,"Gastos Adicionales"),e(),c(29,"input",17),d(30,Ve,3,2,"div",8),e(),o(31,"div",5)(32,"label",18),i(33,"Descripci\xF3n"),e(),c(34,"textarea",19),d(35,Re,2,1,"div",8),e(),o(36,"div",20)(37,"label",21),i(38,"Vehiculo"),e(),o(39,"select",22)(40,"option",23),i(41,"Seleccione el Vehiculo"),e(),d(42,je,2,2,"option",24),e(),d(43,$e,2,1,"div",8),e()(),o(44,"div",25)(45,"button",26),i(46," Agregar "),e(),o(47,"button",27),b("click",function(){return a.onReset()}),i(48," Limpiar "),e()()()()(),o(49,"p"),i(50),e()),r&2&&(s(4),l("formGroup",a.ingresoForm),s(6),l("ngIf",a.ingresoForm.controls.fechaIngreso.invalid&&(a.ingresoForm.controls.fechaIngreso.dirty||a.ingresoForm.controls.fechaIngreso.touched)),s(5),l("ngIf",a.ingresoForm.controls.producidoDiario.invalid&&(a.ingresoForm.controls.producidoDiario.dirty||a.ingresoForm.controls.producidoDiario.touched)),s(5),l("ngIf",a.ingresoForm.controls.vrLiquidacion.invalid&&(a.ingresoForm.controls.vrLiquidacion.dirty||a.ingresoForm.controls.vrLiquidacion.touched)),s(5),l("ngIf",a.ingresoForm.controls.vrGasolina.invalid&&(a.ingresoForm.controls.vrGasolina.dirty||a.ingresoForm.controls.vrGasolina.touched)),s(5),l("ngIf",a.ingresoForm.controls.vrGastosAdicionales.invalid&&(a.ingresoForm.controls.vrGastosAdicionales.dirty||a.ingresoForm.controls.vrGastosAdicionales.touched)),s(5),l("ngIf",a.ingresoForm.controls.descripcion.invalid&&(a.ingresoForm.controls.descripcion.dirty||a.ingresoForm.controls.descripcion.touched)),s(5),l("ngValue",0),s(2),l("ngForOf",a.vehiculos),s(),l("ngIf",a.ingresoForm.controls.id.invalid&&(a.ingresoForm.controls.id.dirty||a.ingresoForm.controls.id.touched)),s(7),p("Form Status: ",a.ingresoForm.status,""))},dependencies:[S,k,ne,pe,ce,te,ae,me,ie,oe,se,de,le]})};var G=N(fe());function Pe(t,n){t&1&&(o(0,"div",2),i(1,` NO hay Ingresos que mostrar
`),e())}function Ue(t,n){if(t&1){let r=$();o(0,"tbody")(1,"tr",15)(2,"td",16),i(3),e(),o(4,"td",16),i(5),f(6,"date"),e(),o(7,"td",16),i(8),f(9,"number"),e(),o(10,"td",16),i(11),f(12,"number"),e(),o(13,"td",16),i(14),f(15,"number"),e(),o(16,"td",16),i(17),f(18,"number"),e(),o(19,"td",16),i(20),e(),o(21,"td",16),i(22),e(),o(23,"td",16),i(24),e(),o(25,"th")(26,"button",17),i(27,"Update"),e()(),o(28,"th")(29,"button",18),b("click",function(){let x=j(r).$implicit,_e=m(2);return B(_e.onDeleteIngreso(x.id))}),i(30,"Delete"),e()()()()}if(t&2){let r=n.$implicit,a=n.index;s(3),p(" ",a+1,""),s(2),p(" ",z(6,11,r.fechaIngreso,"dd-MM-yyyy"),""),s(3),p(" ",y(9,14,r.producidoDiario),""),s(3),p(" ",y(12,16,r.vrLiquidacion),""),s(3),p(" ",y(15,18,r.vrGasolina),""),s(3),p(" ",y(18,20,r.vrGastosAdicionales),""),s(3),p(" ",r.descripcion,""),s(2),p(" ",r.vehiculo.placa,""),s(2),H(" ",r.vehiculo.propietario.primerNombre,"","","",r.vehiculo.propietario.primerApellido," ")}}function He(t,n){if(t&1&&(o(0,"div",3)(1,"span",4),i(2,"Listado de Ingresos"),e(),o(3,"div",5)(4,"div",6)(5,"button",7),i(6,"Nuevo Ingreso"),e(),o(7,"div",8)(8,"table",9)(9,"thead",10)(10,"tr")(11,"th",11),i(12,"#"),e(),o(13,"th",12),i(14,"Fecha Ingreso "),e(),o(15,"th",11),i(16,"Producido"),e(),o(17,"th",11),i(18,"Liquidaci\xF3n"),e(),o(19,"th",11),i(20,"Valor Gasolina"),e(),o(21,"th",11),i(22,"Gasto Adicional"),e(),o(23,"th",11),i(24,"Descripci\xF3n"),e(),o(25,"th",11),i(26,"Placa Carro"),e(),o(27,"th",11),i(28,"Propietario"),e(),o(29,"th",13),i(30,"Acciones"),e()()(),d(31,Ue,31,22,"tbody",14),e()()()()()),t&2){let r=m();s(31),l("ngForOf",r.ingresos)}}var A=class t{constructor(n,r){this.ingresoService=n;this.router=r}ingresos=[];ngOnInit(){this.dataIngresos()}dataIngresos(){this.ingresoService.lisIngreso().subscribe(n=>this.ingresos=n),console.log(this.ingresos)}onDeleteIngreso(n){G.default.fire({title:"Seguro que quiere eliminar?",text:"Cuidado el ingreso sera eliminado del sistema!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si"}).then(r=>{r.isConfirmed&&(this.ingresoService.deleteIngresoById(n).subscribe(()=>{this.ingresos=this.ingresos.filter(a=>a.id!==n),this.router.navigate(["/dashboard/ingreso/list-ingresos"],{skipLocationChange:!0}).then(()=>{this.router.navigate(["/dashboard/ingreso/list-ingresos"],{state:{}})})}),G.default.fire({title:"Eliminado!",text:"Ingreso eliminado con exito.",icon:"success"}))})}static \u0275fac=function(r){return new(r||t)(g(v),g(E))};static \u0275cmp=u({type:t,selectors:[["ingreso-list-ingreso"]],decls:3,vars:2,consts:[["table",""],["class","alert alert-warning text-center",4,"ngIf","ngIfElse"],[1,"alert","alert-warning","text-center"],[1,"flex","flex-col"],[1,"text-4xl","text-cyan-800","text-center","font-medium","leading-tight"],[1,"overflow-x-auto","sm:-mx-6","lg:-mx-8"],[1,"inline-block","min-w-full","py-2","sm:px-6","lg:px-8"],["routerLink","/dashboard/ingreso/add-ingresos",1,"btn","btn-lm","btn-outline-primary","m-2"],[1,"overflow-hidden"],["data-twe-spy","scroll","data-twe-target","#scrollspy-collapsible","data-twe-offset","0",1,"min-w-full","text-center","text-sm","font-light","text-surface","dark:text-white"],[1,"border-b","border-neutral-200","bg-[#68829b]","font-medium","text-white","dark:border-white/10"],["scope","col",1,"px-6","py-4","text-left"],["scope","col",1,"px-6","py-4"],["colspan","2",2,"text-align","center"],[4,"ngFor","ngForOf"],[1,"border-b","border-neutral-200","dark:border-white/10","text-dark"],[1,"whitespace-nowrap","px-6","py-4","text-left"],[1,"btn","btn-sm","btn-outline-success"],["type","submit",1,"btn","btn-sm","btn-outline-danger",3,"click"]],template:function(r,a){if(r&1&&d(0,Pe,2,0,"div",1)(1,He,32,1,"ng-template",null,0,J),r&2){let x=P(2);l("ngIf",a.ingresos.length===0)("ngIfElse",x)}},dependencies:[S,k,Z,Q,K]})};var ze=[{path:"",component:F},{path:"list-ingresos",component:A},{path:"add-ingresos",component:w},{path:"**",redirectTo:"home"}],q=class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=_({type:t});static \u0275inj=I({imports:[D.forChild(ze),D]})};var Ie=class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=_({type:t});static \u0275inj=I({imports:[W,q,ue,ve]})};export{Ie as IngresoModule};
