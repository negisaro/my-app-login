import{a as ue}from"./chunk-L7ZTLJPE.js";import{a as Y,b as Z,c as ee,d as te,e as re,f as oe,g as ie,h as ne,i as se,j as ae,k as le,l as me,m as de,n as ce}from"./chunk-DRBYDBCO.js";import{a as pe}from"./chunk-7A4U7ZJ5.js";import{Aa as X,Ba as ge,D as a,E as p,I as m,J as l,M as i,N as r,O as u,P as U,Q as h,R as d,V as $,W as n,X as G,Y as c,ba as y,ca as _,d as V,da as H,g as T,i as L,k as q,ka as S,la as C,ma as z,n as M,na as J,o as v,oa as K,q as j,qa as Q,r as R,s as g,t as I,va as W,w as B,wa as k,x as P,za as O}from"./chunk-4EQGBAJ3.js";var F=class e{static \u0275fac=function(t){return new(t||e)};static \u0275cmp=g({type:e,selectors:[["app-layout-ingreso"]],decls:1,vars:0,template:function(t,s){t&1&&u(0,"router-outlet")},dependencies:[W]})};var E=V(pe());var f=class e{constructor(o){this.http=o}baseUrl=X.baseUrl;lisIngreso(){return this.http.get(`${this.baseUrl}/api/ingresos`)}addIngreso(o){return this.http.post(`${this.baseUrl}/api/ingresos/create`,o)}updateIngreso(o){if(!o.id)throw Error("ingreso requerido");return this.http.post(`${this.baseUrl}/api/ingresos`,o)}deleteIngresoById(o){return this.http.delete(`${this.baseUrl}/api/ingresos/${o}`).pipe(q(t=>T(!1)),L(t=>!0))}static \u0275fac=function(t){return new(t||e)(j(Q))};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})};function ye(e,o){e&1&&(i(0,"small",23),n(1," La fecha es requerida. "),r())}function _e(e,o){if(e&1&&(i(0,"div"),m(1,ye,2,0,"small",22),r()),e&2){let t=d();a(),l("ngIf",t.ingresoForm.controls.fechaIngreso.errors==null?null:t.ingresoForm.controls.fechaIngreso.errors.required)}}function Se(e,o){e&1&&(i(0,"p",25)(1,"span",26),n(2,"Oops!"),r(),n(3," El precio es requerido! "),r())}function Ce(e,o){e&1&&(i(0,"p",25)(1,"span",26),n(2,"Oops!"),r(),n(3," Debes ingresar solo n\xFAmeros! "),r())}function ke(e,o){if(e&1&&(i(0,"div"),m(1,Se,4,0,"p",24)(2,Ce,4,0,"p",24),r()),e&2){let t=d();a(),l("ngIf",t.ingresoForm.controls.producidoDiario.errors==null?null:t.ingresoForm.controls.producidoDiario.errors.required),a(),l("ngIf",t.ingresoForm.controls.producidoDiario.errors==null?null:t.ingresoForm.controls.producidoDiario.errors.pattern)}}function Fe(e,o){e&1&&(i(0,"p",25)(1,"span",26),n(2,"Oops!"),r(),n(3,"La descripci\xF3n del ingreso es requerida! "),r())}function Ee(e,o){if(e&1&&(i(0,"div"),m(1,Fe,4,0,"p",24),r()),e&2){let t=d();a(),l("ngIf",t.ingresoForm.controls.descripcion.errors==null?null:t.ingresoForm.controls.descripcion.errors.required)}}function we(e,o){if(e&1&&(i(0,"option",27),n(1),r()),e&2){let t=o.$implicit;l("ngValue",t.id),a(),G(t.placa)}}function De(e,o){e&1&&(i(0,"p",25)(1,"span",26),n(2,"Oops!"),r(),n(3," El vehiculo es requerido! "),r())}function Ne(e,o){if(e&1&&(i(0,"div"),m(1,De,4,0,"p",24),r()),e&2){let t=d();a(),l("ngIf",t.ingresoForm.controls.id.errors==null?null:t.ingresoForm.controls.id.errors.required)}}var w=class e{constructor(o,t,s){this.ingresoService=o;this.vehiculoService=t;this.router=s}fb=R(de);vl=Z;ingresos=[];vehiculos=[];ngOnInit(){this.dataVehiculos()}ingresoForm=this.fb.group({id:[0],fechaIngreso:["",[this.vl.required]],producidoDiario:[0,[this.vl.required,this.vl.pattern(/^[0-9]*$/)]],descripcion:["",[this.vl.required]],vehiculos:this.fb.group({id:[0,[this.vl.required]]})});dataVehiculos(){this.vehiculoService.getPVehiculo().subscribe(o=>this.vehiculos=o)}get currentIngreso(){return this.ingresoForm.value}onSubmit(){if(console.log("inicioo onSumit"),this.ingresoForm.invalid){E.default.fire({icon:"error",title:"Oops...",text:"Debes diligenciar todos los campos!"});return}this.currentIngreso.id&&(console.log("update onSumit"),this.ingresoService.updateIngreso(this.currentIngreso).subscribe({next:o=>{console.log(o),this.router.navigateByUrl("/dashboard/ingreso/list-ingresos"),E.default.fire({title:"Actualizado ingreso!",text:"Ingreso actualizado con exito!",icon:"success"})}})),this.ingresoService.addIngreso(this.currentIngreso).subscribe({next:o=>{console.log(o),this.router.navigateByUrl("/dashboard/ingreso/list-ingresos"),E.default.fire({title:"Creado nuevo ingreso!",text:"Ingreso creado con exito!",icon:"success"})}}),console.log("despues de aadd onSumit")}onReset(){this.ingresoForm.reset()}static \u0275fac=function(t){return new(t||e)(p(f),p(ue),p(k))};static \u0275cmp=g({type:e,selectors:[["ingreso-add-ingreso"]],decls:37,vars:10,consts:[[1,"bg-white","p-6","shadow-4","dark:bg-gray-900","mx-auto","block","max-w-lm","rounded-lg"],[1,"py-8","px-4","mx-auto","max-w-2xl","lg:py-16"],[1,"mb-4","text-xl","font-bold","text-gray-900","dark:text-white"],[3,"ngSubmit","formGroup"],[1,"grid","gap-4","sm:grid-cols-2","sm:gap-6"],[1,"w-full"],["for","fechaIngreso",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-gray-300"],["formControlName","fechaIngreso","name","fechaIngreso","type","date","id","fechaIngreso",1,"shadow-sm","bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-primary-500","focus:border-primary-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-primary-500","dark:focus:border-primary-500","dark:shadow-sm-light"],[4,"ngIf"],["for","producidoDiario",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","producidoDiario","type","number","name","producidoDiario","id","producidoDiario","placeholder","0",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-primary-500","dark:focus:border-primary-500"],[1,"sm:col-span-2"],["for","descripcion",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","descripcion","name","descripcion","id","descripcion","rows","5","placeholder","Descripci\xF3n del producto",1,"block","p-2.5","w-full","text-sm","text-gray-900","bg-gray-50","rounded-lg","border","border-gray-300","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-primary-500","dark:focus:border-primary-500"],["formGroupName","vehiculos",1,"sm:col-span-2"],["for","id",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","id","name","id","id","id",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-primary-500","focus:border-primary-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-primary-500","dark:focus:border-primary-500"],[3,"selected","ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between"],["type","submit",1,"inline-flex","items-center","px-5","py-2.5","mt-4","sm:mt-6","text-sm","font-medium","text-center","text-white","bg-primary-700","rounded-lg","focus:ring-4","focus:ring-primary-200","dark:focus:ring-primary-900","hover:bg-primary-800","m-2"],["type","reset",1,"inline-flex","items-center","px-5","py-2.5","mt-4","sm:mt-6","text-sm","font-medium","text-center","text-white","bg-primary-700","rounded-lg","focus:ring-4","focus:ring-primary-200","dark:focus:ring-primary-900","hover:bg-primary-800",3,"click"],["Class","form -text text-danger",4,"ngIf"],["Class","form -text text-danger"],["class","mt-2 text-sm text-red-600 dark:text-red-500",4,"ngIf"],[1,"mt-2","text-sm","text-red-600","dark:text-red-500"],[1,"font-medium"],[3,"ngValue"]],template:function(t,s){t&1&&(i(0,"section",0)(1,"div",1)(2,"h2",2),n(3,"Agregar Nuevo Ingreso"),r(),i(4,"form",3),h("ngSubmit",function(){return s.onSubmit()}),i(5,"div",4)(6,"div",5)(7,"label",6),n(8,"Fecha de Ingreso"),r(),u(9,"input",7),m(10,_e,2,1,"div",8),r(),i(11,"div",5)(12,"label",9),n(13,"Producido"),r(),u(14,"input",10),m(15,ke,3,2,"div",8),r(),i(16,"div",11)(17,"label",12),n(18,"Descripci\xF3n"),r(),u(19,"textarea",13),m(20,Ee,2,1,"div",8),r(),i(21,"div",14)(22,"label",15),n(23,"Vehiculo"),r(),i(24,"select",16)(25,"option",17),n(26,"Seleccione el Vehiculo"),r(),m(27,we,2,2,"option",18),r(),m(28,Ne,2,1,"div",8),r()(),i(29,"div",19)(30,"button",20),n(31," Agregar "),r(),i(32,"button",21),h("click",function(){return s.onReset()}),n(33," Limpiar "),r()()()()(),i(34,"pre"),n(35),y(36,"json"),r()),t&2&&(a(4),l("formGroup",s.ingresoForm),a(6),l("ngIf",s.ingresoForm.controls.fechaIngreso.invalid&&(s.ingresoForm.controls.fechaIngreso.dirty||s.ingresoForm.controls.fechaIngreso.touched)),a(5),l("ngIf",s.ingresoForm.controls.producidoDiario.invalid&&(s.ingresoForm.controls.producidoDiario.dirty||s.ingresoForm.controls.producidoDiario.touched)),a(5),l("ngIf",s.ingresoForm.controls.descripcion.invalid&&(s.ingresoForm.controls.descripcion.dirty||s.ingresoForm.controls.descripcion.touched)),a(5),l("ngValue",0),a(2),l("ngForOf",s.vehiculos),a(),l("ngIf",s.ingresoForm.controls.id.invalid&&(s.ingresoForm.controls.id.dirty||s.ingresoForm.controls.id.touched)),a(7),c("  ",_(36,8,s.currentIngreso),`
`))},dependencies:[S,C,re,le,me,Y,oe,ae,ee,te,ie,se,ne,z]})};var A=V(pe());function Oe(e,o){e&1&&(i(0,"div",2),n(1,` NO hay Ingresos que mostrar
`),r())}function Ae(e,o){if(e&1){let t=U();i(0,"tbody")(1,"tr",14)(2,"td",15),n(3),r(),i(4,"td",15),n(5),r(),i(6,"td",15),n(7),y(8,"number"),r(),i(9,"td",15),n(10),r(),i(11,"td",15),n(12),r(),i(13,"th")(14,"button",16),n(15,"Update"),r()(),i(16,"th")(17,"button",17),h("click",function(){let x=B(t).$implicit,ve=d(2);return P(ve.onDeleteVehiculo(x.id))}),n(18,"Delete"),r()()()()}if(e&2){let t=o.$implicit,s=o.index;a(3),c(" ",s+1,""),a(2),c(" ",t.fechaIngreso,""),a(2),c(" ",_(8,5,t.producidoDiario),""),a(3),c(" ",t.descripcion,""),a(2),c(" ",t.vehiculos.placa,"")}}function Ve(e,o){if(e&1&&(i(0,"span",3),n(1,"Listado de Ingresos"),r(),i(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7)(6,"table",8)(7,"thead",9)(8,"tr")(9,"th",10),n(10,"#"),r(),i(11,"th",11),n(12,"Fecha Ingreso "),r(),i(13,"th",10),n(14,"Producido"),r(),i(15,"th",10),n(16,"Descripci\xF3n"),r(),i(17,"th",10),n(18,"Placa Carro"),r(),i(19,"th",10),n(20,"Propietario"),r(),i(21,"th",12),n(22,"Acciones"),r()()(),m(23,Ae,19,7,"tbody",13),r()()()()()),e&2){let t=d();a(23),l("ngForOf",t.ingresos)}}var D=class e{constructor(o,t){this.ingresoService=o;this.router=t}ingresos=[];ngOnInit(){this.ingresoService.lisIngreso().subscribe(o=>this.ingresos=o),console.log(this.ingresos)}onDeleteVehiculo(o){A.default.fire({title:"Seguro que quiere eliminar?",text:"Cuidado el vehiculo sera eliminado del sistema!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si"}).then(t=>{t.isConfirmed&&(this.ingresoService.deleteIngresoById(o).subscribe(()=>{this.router.navigate(["/dashboard/ingreso/list-ingresos"],{skipLocationChange:!0}).then(()=>{this.router.navigate(["/dashboard/ingreso/list-ingresos"],{state:{}})})}),A.default.fire({title:"Eliminado!",text:"Ingreso eliminado con exito.",icon:"success"}))})}static \u0275fac=function(t){return new(t||e)(p(f),p(k))};static \u0275cmp=g({type:e,selectors:[["ingreso-list-ingreso"]],decls:3,vars:2,consts:[["table",""],["class","alert alert-warning text-center",4,"ngIf","ngIfElse"],[1,"alert","alert-warning","text-center"],[1,"text-4xl","text-cyan-800","text-center","font-medium","leading-tight"],[1,"flex","flex-col"],[1,"overflow-x-auto","sm:-mx-6","lg:-mx-8"],[1,"inline-block","min-w-full","py-2","sm:px-6","lg:px-8"],[1,"overflow-hidden"],["data-twe-spy","scroll","data-twe-target","#scrollspy-collapsible","data-twe-offset","0",1,"min-w-full","text-center","text-sm","font-light","text-surface","dark:text-white"],[1,"border-b","border-neutral-200","bg-[#68829b]","font-medium","text-white","dark:border-white/10"],["scope","col",1,"px-6","py-4","text-left"],["scope","col",1,"px-6","py-4"],["colspan","3",2,"text-align","center"],[4,"ngFor","ngForOf"],[1,"border-b","border-neutral-200","dark:border-white/10","text-dark"],[1,"whitespace-nowrap","px-6","py-4","text-left"],[1,"btn","btn-sm","btn-outline-success"],["type","submit",1,"btn","btn-sm","btn-outline-danger",3,"click"]],template:function(t,s){if(t&1&&m(0,Oe,2,0,"div",1)(1,Ve,24,1,"ng-template",null,0,H),t&2){let x=$(2);l("ngIf",s.ingresos.length===0)("ngIfElse",x)}},dependencies:[S,C,J]})};var Te=[{path:"",component:F},{path:"list-ingresos",component:D},{path:"add-ingresos",component:w},{path:"**",redirectTo:"home"}],N=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=I({type:e});static \u0275inj=v({imports:[O.forChild(Te),O]})};var be=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=I({type:e});static \u0275inj=v({imports:[K,N,ce,ge]})};export{be as IngresoModule};
