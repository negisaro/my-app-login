import{a as pt,c as mt,d as lt,e as ut,f as g,g as st,h as ft,i as vt,j as gt,l as ht}from"./chunk-A35XWKUM.js";import{a as bt}from"./chunk-PNR3BLO6.js";import{$ as et,B as l,D as a,E as u,I as v,J as p,L as w,M as o,N as i,O as c,P as W,Q as y,R as s,S as X,T as n,U as T,V as S,X as Y,Y as _,Z,_ as tt,d as U,fa as rt,g as $,ga as ot,i as q,ia as it,ja as nt,k as H,la as at,n as x,o as E,pa as ct,q as z,qa as I,ra as L,s as m,t as C,ta as j,ua as dt,va as Pt,w as J,x as K,y as b,z as Q}from"./chunk-DRKUHF5Z.js";var F=class e{static \u0275fac=function(t){return new(t||e)};static \u0275cmp=m({type:e,selectors:[["product-layout-product"]],decls:1,vars:0,template:function(t,d){t&1&&c(0,"router-outlet")},dependencies:[ct]})};var A=U(bt());var h=class e{constructor(r){this.http=r}baseUrl=dt.baseUrl;getProduct(){return this.http.get(`${this.baseUrl}/api/products`)}addProduct(r){return this.http.post(`${this.baseUrl}/api/products/create`,r)}updateProduct(r){if(!r.id)throw Error("Producto requerido");return this.http.post(`${this.baseUrl}/api/products`,r)}deleteProductById(r){return this.http.delete(`${this.baseUrl}/api/products/${r}`).pipe(H(t=>$(!1)),q(t=>!0))}static \u0275fac=function(t){return new(t||e)(z(at))};static \u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"})};var N=class e{constructor(r,t){this.productService=r;this.router=t}productForm=new ut({id:new g(0),sku:new g(""),name:new g("",{nonNullable:!0}),price:new g(0),description:new g("")});get currentProduct(){return this.productForm.value}onSubmit(){if(!this.productForm.invalid){if(this.currentProduct.id){this.productService.updateProduct(this.currentProduct).subscribe({next:r=>{this.router.navigate(["/dashboard/product/list-product"])}}),A.default.fire({title:"Actualizado producto!",text:"Producto actualizado con exito!",icon:"success"});return}this.productService.addProduct(this.currentProduct).subscribe({next:r=>{console.log(r),this.router.navigate(["/dashboard/product/list-product"])}}),A.default.fire({title:"Creado nuevo producto!",text:"Producto creado con exito!",icon:"success"})}}static \u0275fac=function(t){return new(t||e)(u(h),u(I))};static \u0275cmp=m({type:e,selectors:[["product-add-product"]],decls:18,vars:1,consts:[[1,"container"],[1,"card","bg-light"],[1,"text-secondary"],[1,"card-body"],[3,"ngSubmit","formGroup"],["placeholder","Name","name","name","formControlName","name",1,"form-control","my-2"],["placeholder","Description","name","description","formControlName","description",1,"form-control","my-2"],["placeholder","Sku","name","sku","formControlName","sku",1,"form-control","my-2"],["type","number","placeholder","Price","name","price","formControlName","price",1,"form-control","my-2"],["type","submit",1,"btn","btn-sm","btn-outline-primary","mx-3"],["type","button",1,"btn","btn-sm","btn-outline-success"]],template:function(t,d){t&1&&(o(0,"div",0)(1,"div",1),c(2,"h3",2),i(),o(3,"div",3)(4,"form",4),y("ngSubmit",function(){return d.onSubmit()}),o(5,"div"),c(6,"input",5),i(),o(7,"div"),c(8,"input",6),i(),o(9,"div"),c(10,"input",7),i(),o(11,"div"),c(12,"input",8),i(),o(13,"div")(14,"button",9),n(15,"Guardar"),i(),o(16,"button",10),n(17,"Limpiar"),i()()()()()),t&2&&(a(4),p("formGroup",d.productForm))},dependencies:[st,pt,ft,mt,lt,vt,gt]})};var V=U(bt());var M=class e{_newProductEventEmitter=new l;_idProductEventEmitter=new l;_findProductByIdEventEmitter=new l;_selectProductEventEmitter=new l;_errorsProductFormEventEmitter=new l;_pageProductEventEmitter=new l;constructor(){}get pageProductEventEmitter(){return this._pageProductEventEmitter}get errorsProductFormEventEmitter(){return this._errorsProductFormEventEmitter}get selectProductEventEmitter(){return this._selectProductEventEmitter}get findProductByIdEventEmitter(){return this._findProductByIdEventEmitter}get newProductEventEmitter(){return this._newProductEventEmitter}get idProductEventEmitter(){return this._idProductEventEmitter}static \u0275fac=function(t){return new(t||e)};static \u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"})};var yt=e=>[e,0],G=(e,r)=>[e,r];function St(e,r){if(e&1&&(o(0,"li",1)(1,"a",2),b(),o(2,"svg",7),c(3,"path",8)(4,"path",9),i()()()),e&2){let t=s(2);a(),p("routerLink",_(1,G,t.url,t.paginator.number-1))}}function _t(e,r){if(e&1&&(o(0,"li",1)(1,"a",2),b(),o(2,"svg",10),c(3,"path",11)(4,"path",12),i()()()),e&2){let t=s(2);a(),p("routerLink",_(1,G,t.url,t.paginator.number+1))}}function It(e,r){if(e&1&&(o(0,"ul",0)(1,"li",1)(2,"a",2),b(),o(3,"svg",3),c(4,"path",4),i()()(),v(5,St,5,4,"li",1)(6,_t,5,4,"li",1),Q(),o(7,"li",1)(8,"a",2),b(),o(9,"svg",5),c(10,"path",6),i()()()()),e&2){let t=s();a(2),p("routerLink",Y(4,yt,t.url)),a(3),w(t.paginator.number>0?5:-1),a(),w(t.paginator.number<t.paginator.totalPages-1?6:-1),a(2),p("routerLink",_(6,G,t.url,t.paginator.totalPages-1))}}var k=class e{url="";paginator={};static \u0275fac=function(t){return new(t||e)};static \u0275cmp=m({type:e,selectors:[["shared-paginator"]],inputs:{url:"url",paginator:"paginator"},decls:1,vars:1,consts:[[1,"pagination"],[1,"page-item"],[1,"page-link",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-chevron-bar-left"],["fill-rule","evenodd","d","M11.854 3.646a.5.5 0 0 1 0 .708L8.207 8l3.647 3.646a.5.5 0 0 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 0 1 .708 0M4.5 1a.5.5 0 0 0-.5.5v13a.5.5 0 0 0 1 0v-13a.5.5 0 0 0-.5-.5"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-chevron-bar-right"],["fill-rule","evenodd","d","M4.146 3.646a.5.5 0 0 0 0 .708L7.793 8l-3.647 3.646a.5.5 0 0 0 .708.708l4-4a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708 0M11.5 1a.5.5 0 0 1 .5.5v13a.5.5 0 0 1-1 0v-13a.5.5 0 0 1 .5-.5"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-chevron-double-left"],["fill-rule","evenodd","d","M8.354 1.646a.5.5 0 0 1 0 .708L2.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0"],["fill-rule","evenodd","d","M12.354 1.646a.5.5 0 0 1 0 .708L6.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-chevron-double-right"],["fill-rule","evenodd","d","M3.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L9.293 8 3.646 2.354a.5.5 0 0 1 0-.708"],["fill-rule","evenodd","d","M7.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L13.293 8 7.646 2.354a.5.5 0 0 1 0-.708"]],template:function(t,d){t&1&&v(0,It,11,9,"ul",0),t&2&&w(d.paginator.totalPages>1?0:-1)},dependencies:[L]})};function Ft(e,r){e&1&&(o(0,"div",3),n(1,` NO hay productos que mostrar
`),i())}function Nt(e,r){if(e&1){let t=W();o(0,"tbody")(1,"tr",15)(2,"td",16),n(3),i(),o(4,"td",16),n(5),i(),o(6,"td",16),n(7),i(),o(8,"td",17),n(9),Z(10,"number"),i(),o(11,"td",16),n(12),i(),o(13,"th")(14,"button",18),n(15,"Update"),i()(),o(16,"th")(17,"button",19),y("click",function(){let P=J(t).$implicit,Ct=s(2);return K(Ct.onDeleteProduct(P.id))}),n(18,"Delete"),i()()()()}if(e&2){let t=r.$implicit,d=r.index;a(3),S(" ",d+1,""),a(2),S(" ",t.name,""),a(2),S(" ",t.sku,""),a(2),T(tt(10,5,t.price)),a(3),T(t.description)}}function Mt(e,r){if(e&1&&(o(0,"button",4),n(1,"Ingresar Producto "),i(),o(2,"div",5)(3,"div",6)(4,"div",7)(5,"div",8)(6,"table",9)(7,"thead",10)(8,"tr")(9,"th",11),n(10,"#"),i(),o(11,"th",11),n(12,"Nombre "),i(),o(13,"th",11),n(14,"sku"),i(),o(15,"th",11),n(16,"Precio"),i(),o(17,"th",12),n(18,"Descripcion"),i(),o(19,"th",13),n(20,"Acciones"),i()()(),v(21,Nt,19,7,"tbody",14),i()()(),c(22,"shared-paginator",2),i()()),e&2){let t=s();a(21),p("ngForOf",t.products),a(),p("paginator",t.paginator)("url","/product/list-producto")}}var D=class e{constructor(r,t,d){this.productService=r;this.router=t;this.sharingData=d}products=[];paginator={};ngOnInit(){this.pageProductEvent(),this.productService.getProduct().subscribe(r=>this.products=r)}pageProductEvent(){this.sharingData.pageProductEventEmitter.subscribe(r=>{this.products=r.products,this.paginator=r.paginator})}onDeleteProduct(r){V.default.fire({title:"Seguro que quiere eliminar?",text:"Cuidado el producto sera eliminado del sistema!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si"}).then(t=>{t.isConfirmed&&(this.productService.deleteProductById(r).subscribe(()=>{this.router.navigate(["/dashboard/product/list-product"],{skipLocationChange:!0}).then(()=>{this.router.navigate(["/dashboard/product/list-product"],{state:{products:this.products,paginator:this.paginator}})})}),V.default.fire({title:"Eliminado!",text:"Producto eliminado con exito.",icon:"success"}))})}static \u0275fac=function(t){return new(t||e)(u(h),u(I),u(M))};static \u0275cmp=m({type:e,selectors:[["product-list-product"]],decls:4,vars:4,consts:[["table",""],["class","alert alert-warning text-center",4,"ngIf","ngIfElse"],[3,"paginator","url"],[1,"alert","alert-warning","text-center"],["type","submit","routerLink","product/add-product",1,"btn","btn-sl","btn-outline-primary"],[1,"flex","flex-col"],[1,"overflow-x-auto","sm:-mx-6","lg:-mx-8"],[1,"inline-block","min-w-full","py-2","sm:px-6","lg:px-8"],[1,"overflow-hidden"],["data-twe-spy","scroll","data-twe-target","#scrollspy-collapsible","data-twe-offset","0",1,"min-w-full","text-center","text-sm","font-light","text-surface","dark:text-white"],[1,"border-b","border-neutral-200","bg-[#68829b]","font-medium","text-white","dark:border-white/10"],["scope","col",1,"px-6","py-4","text-left"],["scope","col",1,"px-6","py-4"],["colspan","3",2,"text-align","center"],[4,"ngFor","ngForOf"],[1,"border-b","border-neutral-200","dark:border-white/10"],[1,"whitespace-nowrap","px-6","py-4","text-left"],[1,"whitespace-nowrap","px-6","py-4","text-center"],[1,"btn","btn-sm","btn-outline-success"],["type","submit",1,"btn","btn-sm","btn-outline-danger",3,"click"]],template:function(t,d){if(t&1&&(v(0,Ft,2,0,"div",1)(1,Mt,23,3,"ng-template",null,0,et),c(3,"shared-paginator",2)),t&2){let P=X(2);p("ngIf",d.products.length===0)("ngIfElse",P),a(3),p("paginator",d.paginator)("url","/product/page")}},dependencies:[rt,ot,L,k,it]})};var kt=[{path:"",component:F},{path:"list-product",component:D},{path:"add-product",component:N},{path:"**",redirectTo:"home"}],R=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=C({type:e});static \u0275inj=E({imports:[j.forChild(kt),j]})};var Et=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=C({type:e});static \u0275inj=E({imports:[nt,R,ht,Pt]})};export{Et as ProductModule};
