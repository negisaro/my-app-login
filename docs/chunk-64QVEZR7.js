import{a as lt}from"./chunk-VV7WCDBE.js";import{a as et,c as rt,d as ot,e as it,f as l,g as nt,h as at,i as dt,j as ct,n as mt,p as ut}from"./chunk-MBW2NNWA.js";import{a as pt}from"./chunk-NUCSRQZZ.js";import{B as u,Ba as D,Ca as tt,D as d,Da as st,E as m,I,K as s,N as i,O as o,P as c,Q as q,R as h,S as N,W as U,X as n,Y as F,Z as P,ca as V,d as M,da as G,ea as H,g as j,i as A,k as O,ma as z,n as v,na as J,o as x,pa as K,q as B,qa as Q,s as p,sa as W,t as y,w as T,wa as X,x as $,xa as Y,ya as E,za as Z}from"./chunk-O6WPUTJ7.js";var w=class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=p({type:r,selectors:[["product-layout-product"]],decls:1,vars:0,template:function(t,a){t&1&&c(0,"router-outlet")},dependencies:[Y]})};var L=M(pt());var g=class r{constructor(e){this.http=e}baseUrl=tt.baseUrl;getProduct(){return this.http.get(`${this.baseUrl}/api/products`)}getPageable(e){return this.http.get(`${this.baseUrl}/api/products/page/${e}`)}addProduct(e){return this.http.post(`${this.baseUrl}/api/products/create`,e)}updateProduct(e){if(!e.id)throw Error("Producto requerido");return this.http.post(`${this.baseUrl}/api/products`,e)}deleteProductById(e){return this.http.delete(`${this.baseUrl}/api/products/${e}`).pipe(O(t=>j(!1)),A(t=>!0))}static \u0275fac=function(t){return new(t||r)(B(W))};static \u0275prov=v({token:r,factory:r.\u0275fac,providedIn:"root"})};var k=class r{constructor(e,t){this.productService=e;this.router=t}productForm=new it({id:new l(0),sku:new l(""),name:new l("",{nonNullable:!0}),price:new l(0),description:new l("")});get currentProduct(){return this.productForm.value}onSubmit(){if(!this.productForm.invalid){if(this.currentProduct.id){this.productService.updateProduct(this.currentProduct).subscribe({next:e=>{this.router.navigate(["/dashboard/product/list-product"])}}),L.default.fire({title:"Actualizado producto!",text:"Producto actualizado con exito!",icon:"success"});return}this.productService.addProduct(this.currentProduct).subscribe({next:e=>{console.log(e),this.router.navigate(["/dashboard/product/list-product"])}}),L.default.fire({title:"Creado nuevo producto!",text:"Producto creado con exito!",icon:"success"})}}static \u0275fac=function(t){return new(t||r)(m(g),m(E))};static \u0275cmp=p({type:r,selectors:[["product-add-product"]],decls:24,vars:1,consts:[[1,"bg-white","dark:bg-gray-900"],[1,"py-8","px-4","mx-auto","max-w-2xl","lg:py-16"],[1,"mb-4","text-xl","font-bold","text-gray-900","dark:text-white"],[3,"ngSubmit","formGroup"],[1,"grid","gap-4","sm:grid-cols-2","sm:gap-6"],[1,"sm:col-span-2"],["for","name",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","name","type","text","name","name","id","name","placeholder","Nombre Producto","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-primary-500","dark:focus:border-primary-500"],[1,"w-full"],["for","sku",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","sku","type","text","name","sku","id","sku","placeholder","Sku","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-primary-500","dark:focus:border-primary-500"],["for","price",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","price","type","number","name","price","id","price","placeholder","$2999","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-primary-500","dark:focus:border-primary-500"],["for","description",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","description","name","description","id","description","rows","5","placeholder","Descripci\xF3n del producto",1,"block","p-2.5","w-full","text-sm","text-gray-900","bg-gray-50","rounded-lg","border","border-gray-300","focus:ring-primary-500","focus:border-primary-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-primary-500","dark:focus:border-primary-500"],["type","submit",1,"inline-flex","items-center","px-5","py-2.5","mt-4","sm:mt-6","text-sm","font-medium","text-center","text-white","bg-primary-700","rounded-lg","focus:ring-4","focus:ring-primary-200","dark:focus:ring-primary-900","hover:bg-primary-800"]],template:function(t,a){t&1&&(i(0,"section",0)(1,"div",1)(2,"h2",2),n(3,"Agregar Nuevo Producto"),o(),i(4,"form",3),h("ngSubmit",function(){return a.onSubmit()}),i(5,"div",4)(6,"div",5)(7,"label",6),n(8,"Nombre Producto"),o(),c(9,"input",7),o(),i(10,"div",8)(11,"label",9),n(12,"Sku"),o(),c(13,"input",10),o(),i(14,"div",8)(15,"label",11),n(16,"Precio"),o(),c(17,"input",12),o(),i(18,"div",5)(19,"label",13),n(20,"Descripci\xF3n"),o(),c(21,"textarea",14),o()(),i(22,"button",15),n(23," Agregar Producto "),o()()()()),t&2&&(d(4),s("formGroup",a.productForm))},dependencies:[nt,et,at,rt,ot,mt,dt,ct]})};var R=M(pt());var S=class r{_newProductEventEmitter=new u;_idProductEventEmitter=new u;_findProductByIdEventEmitter=new u;_selectProductEventEmitter=new u;_errorsProductFormEventEmitter=new u;_pageProductEventEmitter=new u;constructor(){}get pageProductEventEmitter(){return this._pageProductEventEmitter}get errorsProductFormEventEmitter(){return this._errorsProductFormEventEmitter}get selectProductEventEmitter(){return this._selectProductEventEmitter}get findProductByIdEventEmitter(){return this._findProductByIdEventEmitter}get newProductEventEmitter(){return this._newProductEventEmitter}get idProductEventEmitter(){return this._idProductEventEmitter}static \u0275fac=function(t){return new(t||r)};static \u0275prov=v({token:r,factory:r.\u0275fac,providedIn:"root"})};function ht(r,e){r&1&&(i(0,"div",2),n(1,` NO hay productos que mostrar
`),o())}function Pt(r,e){if(r&1){let t=q();i(0,"tbody")(1,"tr",16)(2,"td",17),n(3),o(),i(4,"td",17),n(5),o(),i(6,"td",17),n(7),o(),i(8,"td",18),n(9),V(10,"number"),o(),i(11,"td",17),n(12),o(),i(13,"th")(14,"button",19),n(15,"Update"),o()(),i(16,"th")(17,"button",20),h("click",function(){let b=T(t).$implicit,xt=N(2);return $(xt.onDeleteProduct(b.id))}),n(18,"Delete"),o()()()()}if(r&2){let t=e.$implicit,a=e.index;d(3),P(" ",a+1,""),d(2),P(" ",t.name,""),d(2),P(" ",t.sku,""),d(2),F(G(10,5,t.price)),d(3),F(t.description)}}function Et(r,e){if(r&1&&(i(0,"button",3),n(1,"Ingresar Producto "),o(),i(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7)(6,"span",8),n(7,"Listado de Productos"),o(),i(8,"table",9)(9,"thead",10)(10,"tr")(11,"th",11),n(12,"#"),o(),i(13,"th",11),n(14,"Nombre "),o(),i(15,"th",11),n(16,"sku"),o(),i(17,"th",11),n(18,"Precio"),o(),i(19,"th",12),n(20,"Descripcion"),o(),i(21,"th",13),n(22,"Acciones"),o()()(),I(23,Pt,19,7,"tbody",14),o()()()()(),c(24,"shared-paginator",15)),r&2){let t=N();d(23),s("ngForOf",t.products),d(),s("paginator",t.paginator)("url","/dashboard/product/list-product/page")}}var C=class r{constructor(e,t,a,b){this.productService=e;this.router=t;this.sharingData=a;this.route=b}products=[];paginator={};ngOnInit(){this.pageProductEvent(),this.productService.getProduct().subscribe(e=>this.products=e)}pageProductEvent(){this.route.paramMap.subscribe(e=>{let t=+(e.get("page")||"0");console.log(t),this.productService.getPageable(t).subscribe(a=>{this.paginator=a})})}onDeleteProduct(e){R.default.fire({title:"Seguro que quiere eliminar?",text:"Cuidado el producto sera eliminado del sistema!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si"}).then(t=>{t.isConfirmed&&(this.productService.deleteProductById(e).subscribe(()=>{this.router.navigate(["/dashboard/product/list-product"],{skipLocationChange:!0}).then(()=>{this.router.navigate(["/dashboard/product/list-product"],{state:{products:this.products,paginator:this.paginator}})})}),R.default.fire({title:"Eliminado!",text:"Producto eliminado con exito.",icon:"success"}))})}static \u0275fac=function(t){return new(t||r)(m(g),m(E),m(S),m(X))};static \u0275cmp=p({type:r,selectors:[["product-list-product"]],decls:3,vars:2,consts:[["table",""],["class","alert alert-warning text-center",4,"ngIf","ngIfElse"],[1,"alert","alert-warning","text-center"],["type","submit","routerLink","product/add-product",1,"btn","btn-sl","btn-outline-primary"],[1,"flex","flex-col"],[1,"overflow-x-auto","sm:-mx-6","lg:-mx-8"],[1,"inline-block","min-w-full","py-2","sm:px-6","lg:px-8"],[1,"overflow-hidden"],[1,"text-4xl","text-cyan-800","text-center","font-medium","leading-tight"],["data-twe-spy","scroll","data-twe-target","#scrollspy-collapsible","data-twe-offset","0",1,"min-w-full","text-center","text-sm","font-light","text-surface","dark:text-white"],[1,"border-b","border-neutral-200","bg-[#68829b]","font-medium","text-white","dark:border-white/10"],["scope","col",1,"px-6","py-4","text-left"],["scope","col",1,"px-6","py-4"],["colspan","3",2,"text-align","center"],[4,"ngFor","ngForOf"],[3,"paginator","url"],[1,"border-b","border-neutral-200","dark:border-white/10"],[1,"whitespace-nowrap","px-6","py-4","text-left"],[1,"whitespace-nowrap","px-6","py-4","text-center"],[1,"btn","btn-sm","btn-outline-success"],["type","submit",1,"btn","btn-sm","btn-outline-danger",3,"click"]],template:function(t,a){if(t&1&&I(0,ht,2,0,"div",1)(1,Et,25,3,"ng-template",null,0,H),t&2){let b=U(2);s("ngIf",a.products.length===0)("ngIfElse",b)}},dependencies:[z,J,Z,lt,K]})};var wt=[{path:"",component:w},{path:"list-product",component:C},{path:"add-product",component:k},{path:"**",redirectTo:"home"}],_=class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=y({type:r});static \u0275inj=x({imports:[D.forChild(wt),D]})};var vt=class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=y({type:r});static \u0275inj=x({imports:[Q,_,ut,st]})};export{vt as ProductModule};
